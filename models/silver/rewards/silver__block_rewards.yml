version: 2
models:
  - name: silver__block_rewards
    tests:
      - dbt_utils.unique_combination_of_columns:
          combination_of_columns:
            - BLOCK_ID
            - ACCOUNT
            - REWARD_TYPE
    columns:
      - name: BLOCK_ID
        description: "{{ doc('block_id') }}"
        tests:
          - not_null
      - name: BLOCK_TIMESTAMP
        description: "{{ doc('block_timestamp') }}"
        tests:
          - not_null:
              where: block_id > 39824213
      - name: COMMISSION
        description: Commission earned by the validator
        tests:
          - not_null
      - name: AMOUNT
        description: SOL (lamports) rewards amount in 
        tests:
          - not_null
      - name: POST_BALANCE
        description: Account SOL (lamports) balance  after rewards
        tests:
          - not_null
      - name: ACCOUNT
        description: Address receiving rewards
        tests:
          - not_null
      - name: _INSERTED_DATE
        description: "{{ doc('_inserted_timestamp') }}"
        tests: 
          - not_null
